{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,BarElement,Title,Tooltip,Legend}from'chart.js';import{Line,Bar}from'react-chartjs-2';import{stockAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,BarElement,Title,Tooltip,Legend);const ChartContainer=_ref=>{let{stock,results}=_ref;const[priceData,setPriceData]=useState(null);const[chartType,setChartType]=useState('performance');useEffect(()=>{if(stock){fetchPriceData();}},[stock]);const fetchPriceData=async()=>{try{const response=await stockAPI.getStockData(stock.id);setPriceData(response.data);}catch(error){console.error('Error fetching price data:',error);}};const getPriceChartData=()=>{if(!priceData)return null;return{labels:priceData.map(d=>new Date(d.date).toLocaleDateString()),datasets:[{label:'Close Price',data:priceData.map(d=>d.close_price),borderColor:'rgb(75, 192, 192)',backgroundColor:'rgba(75, 192, 192, 0.1)',tension:0.1}]};};const getPerformanceChartData=()=>{return{labels:results.map(r=>r.indicator_name),datasets:[{label:'Success Rate (%)',data:results.map(r=>r.success_rate),backgroundColor:results.map(r=>r.success_rate>50?'rgba(75, 192, 75, 0.8)':'rgba(192, 75, 75, 0.8)')}]};};const chartOptions={responsive:true,plugins:{legend:{position:'top'},title:{display:true,text:chartType==='price'?\"\".concat(stock.symbol,\" Price History\"):'Indicator Performance Comparison'}},scales:{y:{beginAtZero:chartType!=='price'}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:chartType==='performance'?'active':'',onClick:()=>setChartType('performance'),children:\"Performance Comparison\"}),/*#__PURE__*/_jsx(\"button\",{className:chartType==='price'?'active':'',onClick:()=>setChartType('price'),children:\"Price History\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-wrapper\",children:chartType==='price'&&priceData?/*#__PURE__*/_jsx(Line,{data:getPriceChartData(),options:chartOptions}):/*#__PURE__*/_jsx(Bar,{data:getPerformanceChartData(),options:chartOptions})})]});};export default ChartContainer;","map":{"version":3,"names":["React","useEffect","useState","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","BarElement","Title","Tooltip","Legend","Line","Bar","stockAPI","jsx","_jsx","jsxs","_jsxs","register","ChartContainer","_ref","stock","results","priceData","setPriceData","chartType","setChartType","fetchPriceData","response","getStockData","id","data","error","console","getPriceChartData","labels","map","d","Date","date","toLocaleDateString","datasets","label","close_price","borderColor","backgroundColor","tension","getPerformanceChartData","r","indicator_name","success_rate","chartOptions","responsive","plugins","legend","position","title","display","text","concat","symbol","scales","y","beginAtZero","className","children","onClick","options"],"sources":["/home/munis/project/indicator/technical-indicator-platform/frontend/src/components/ChartContainer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { Line, Bar } from 'react-chartjs-2';\nimport { stockAPI } from '../services/api';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst ChartContainer = ({ stock, results }) => {\n  const [priceData, setPriceData] = useState(null);\n  const [chartType, setChartType] = useState('performance');\n\n  useEffect(() => {\n    if (stock) {\n      fetchPriceData();\n    }\n  }, [stock]);\n\n  const fetchPriceData = async () => {\n    try {\n      const response = await stockAPI.getStockData(stock.id);\n      setPriceData(response.data);\n    } catch (error) {\n      console.error('Error fetching price data:', error);\n    }\n  };\n\n  const getPriceChartData = () => {\n    if (!priceData) return null;\n\n    return {\n      labels: priceData.map(d => new Date(d.date).toLocaleDateString()),\n      datasets: [\n        {\n          label: 'Close Price',\n          data: priceData.map(d => d.close_price),\n          borderColor: 'rgb(75, 192, 192)',\n          backgroundColor: 'rgba(75, 192, 192, 0.1)',\n          tension: 0.1\n        }\n      ]\n    };\n  };\n\n  const getPerformanceChartData = () => {\n    return {\n      labels: results.map(r => r.indicator_name),\n      datasets: [\n        {\n          label: 'Success Rate (%)',\n          data: results.map(r => r.success_rate),\n          backgroundColor: results.map(r => \n            r.success_rate > 50 ? 'rgba(75, 192, 75, 0.8)' : 'rgba(192, 75, 75, 0.8)'\n          ),\n        }\n      ]\n    };\n  };\n\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top',\n      },\n      title: {\n        display: true,\n        text: chartType === 'price' ? `${stock.symbol} Price History` : 'Indicator Performance Comparison'\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: chartType !== 'price'\n      }\n    }\n  };\n\n  return (\n    <div className=\"chart-container\">\n      <div className=\"chart-controls\">\n        <button \n          className={chartType === 'performance' ? 'active' : ''}\n          onClick={() => setChartType('performance')}\n        >\n          Performance Comparison\n        </button>\n        <button \n          className={chartType === 'price' ? 'active' : ''}\n          onClick={() => setChartType('price')}\n        >\n          Price History\n        </button>\n      </div>\n\n      <div className=\"chart-wrapper\">\n        {chartType === 'price' && priceData ? (\n          <Line data={getPriceChartData()} options={chartOptions} />\n        ) : (\n          <Bar data={getPerformanceChartData()} options={chartOptions} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ChartContainer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}